<?php

namespace Database\Seeders;

use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\DB;
use Carbon\Carbon;

class CitySeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Truncate the table before seeding
        DB::table('city_masters')->truncate();

        // Define the city data with state_ids
        $cities = [
            [
                'name' => 'Mumbai',
                'state_id' => 1,
                'pincodes' => ['400001', '400002', '400003', '400004', '400005', '400006', '400007', '400008', '400009', '400010',
                             '400011', '400012', '400013', '400014', '400016', '400017', '400018', '400019', '400020', '400021',
                             '400022', '400023', '400025', '400026', '400028', '400029', '400030', '400031', '400032', '400033',
                             '400034', '400036', '400037', '400039', '400040', '400042', '400043', '400047', '400049', '400050',
                             '400051', '400052', '400053', '400054', '400055', '400056', '400057', '400058', '400059', '400060',
                             '400061', '400062', '400063', '400064', '400065', '400066', '400067', '400068', '400069', '400070',
                             '400071', '400072', '400073', '400074', '400075', '400076', '400077', '400078', '400079', '400080',
                             '400081', '400083', '400084', '400085', '400086', '400087', '400088', '400089', '400090', '400091',
                             '400092', '400093', '400094', '400095', '400096', '400097', '400099', '400100', '400101', '400102',
                             '400103', '400601', '400602', '400603', '400604', '400605', '400606', '400607', '400608', '400609',
                             '400610', '400611', '400612', '400613', '400614', '400615', '400701', '400702', '400703', '400704',
                             '400705', '400706', '400707', '400708', '400709', '400710', '400711', '400801', '400802', '400803',
                             '400804', '400805'
                            ]
            ],
            [
                'name' => 'Pune',
                'state_id' => 1,
                'pincodes' => ['411001', '411002', '411003', '411004', '411005', '411006', '411007', '411008', '411009', '411011',
                             '411012', '411013', '411014', '411015', '411016', '411017', '411018', '411019', '411020', '411021',
                             '411022', '411023', '411024', '411025', '411026', '411027', '411028', '411029', '411030', '411032',
                             '411033', '411035', '411036', '411037', '411038', '411039', '411040', '411041', '411042', '411043',
                             '411044', '411045', '411046', '411047', '411048', '411051', '411052', '411053', '411054', '411057',
                             '411058', '411059', '411060', '411061', '411062', '411063', '411064', '411065', '411066', '411067']
            ],
            [
                'name' => 'Nagpur',
                'state_id' => 1,
                'pincodes' => ['440001', '440002', '440003', '440004', '440005', '440006', '440008', '440009', '440010', '440012',
                             '440013', '440014', '440015', '440016', '440017', '440018', '440019', '440022', '440023', '440024',
                             '440025', '440026', '440027', '440028', '440029', '440030', '440031', '440032', '440033', '440034',
                             '440035', '440036', '440037', '440038', '440039', '440040', '441001', '441106']
            ],
            [
                'name' => 'Thane',
                'state_id' => 1,
                'pincodes' => ['400601', '400602', '400603', '400604', '400605', '400606', '400607', '400608', '400609', '400610',
                             '400611', '400612', '400613', '400614', '400615']
            ],
            [
                'name' => 'Pimpri-Chinchwad',
                'state_id' => 1,
                'pincodes' => ['411019', '411027', '411033', '411034', '411044', '411061']
            ],
            [
                'name' => 'Nashik',
                'state_id' => 1,
                'pincodes' => ['422001', '422002', '422003', '422004', '422005', '422006', '422007', '422008', '422009', '422010',
                             '422011', '422012', '422013', '422014', '422015']
            ],
            [
                'name' => 'Kalyan-Dombivli',
                'state_id' => 1,
                'pincodes' => ['421201', '421202', '421203', '421204', '421301', '421302']
            ],
            [
                'name' => 'Vasai-Virar',
                'state_id' => 1,
                'pincodes' => ['401201', '401202', '401203', '401204', '401205', '401301', '401302', '401303', '401304']
            ],
            [
                'name' => 'Aurangabad',
                'state_id' => 1,
                'pincodes' => ['431001', '431002', '431003', '431004', '431005', '431006', '431007', '431008', '431009']
            ],
            [
                'name' => 'Solapur',
                'state_id' => 1,
                'pincodes' => ['413001', '413002', '413003', '413004', '413005', '413006', '413007']
            ],
        ];

        // Insert the data into the cities table
        $now = Carbon::now();
        foreach ($cities as $city) {
            $cityId = DB::table('city_masters')->insertGetId([
                'name' => $city['name'],
                'state_id' => $city['state_id'],
                'created_at' => $now,  // Set created_at
                'updated_at' => $now,  // Set updated_at
            ]);

            foreach ($city['pincodes'] as $pincode) {
                DB::table('pincode_masters')->insert([
                    'city_id' => $cityId,
                    'pincode' => $pincode,
                    'created_at' => $now,
                    'updated_at' => $now,
                ]);
            }
        }
    }
}
